<!doctype html>
<html lang="en" class="no-js">
<head>
    <meta charset="utf-8">
    <title>Alderwood Times</title>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="../bower_components/semantic-ui/dist/semantic.min.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/style.css">
    <!-- endbuild -->
</head>
<body ng-app="SenseMakingApp" ng-controller="MainCtrl">
    <div class="container">
        <div ng-view="current-month" id="current-month" data-ng-app="MonthControllerApp">
                        <p>2004</p>
                        <section id="month" data-ng-controller="MonthController">
                            {{CurrentMonth}}
                        </section>
        </div>
        <a class="navbar-brand" href="#/" id="title">
            <h4>The Alderwood Times</h4>
            <p>Your Best Local News Source in Alderwood</p>
            <!--img src="images/logo.png" alt="senseMaking" /-->
        </a>
    </div>

    <div class="container">
        <div id="months" style="width:25%;"><!--I removed ng-view="months" -->
            <table>
                <tr>
                    <td>Jan</td>
                    <td>Feb</td>
                    <td>Mar</td>
                </tr>
                    <td>Apr</td>
                    <td>May</td>
                    <td>Jun</td>
                <tr>
                    <td>Jul</td>
                    <td>Aug</td>
                    <td>Sep</td>
                </tr>
                <tr>
                    <td>Oct</td>
                    <td>Nov</td>
                    <td>Dec</td>
                </tr>
            </table>
        </div>
        <div ng-view="entities" id="tag-cloud" style="width:75%;">
            <!--{{tag cloud}}-->
        </div>
    </div>

    <div class="container">
        <div ng-view="" id="major-news">This Month's Major News</div>
        <div class="ui vertically divided grid">
        	<div class="four column row"> <!--class change depending on # of documents that month-->
            	<div class="column major-news">
                	<h2>Title 1</h2>
                <p style="text-align:justify;">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. </p>
                </div>


			<div class="column major-news">
            	<h2>Title 2</h2>
                <p style="text-align:justify;">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. </p>
            </div>
            
            
            <div class="column major-news">
            	<h2>Title 3</h2>
                <p style="text-align:justify;">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. </p>
            </div>
           </div>
        </div>
    </div>

    <div class="container">
        <div ng-view="trendline">This Month's Trend Line</div>
        <div id="chart"></div>
        <div class="chart"></div>
        
    </div>
    
            <script>
			//Approach #1
		
			//Approach #2
			
		d3.json("date.json", function(data){ //data in function(data) is data in date.json
		
		var DateArray = [];
		var MonthArray = [];
		var MonthXAxis = ["Jan","Feb", "Mar", "Apr", "May", "Jun","Jul","Aug","Sep","Oct","Nov", "Dec"];
		var counts = {};
		var CountsArray = [];
			for(var key in data) {
				DateArray.push(data[key]);
				console.log(DateArray);
				//alert (typeof data);
			}
		
			for(var key in DateArray) {
				var month_temp = DateArray[key][5]+DateArray[key][6];
				MonthArray.push(month_temp);
			}
			console.log(MonthArray);
			
		for (var i = 0; i< MonthArray.length; i++){
				var num = MonthArray[i];
				counts[num] = counts[num] ? counts[num]+1 : 1;
			};
				console.log(counts);
				
				//Push month counts into CountsArray
		for (var key in counts){
				CountsArray.push(counts[key]);
				console.log(CountsArray);
			}
				
		//Draw the histogram in D3					
		var histogram = d3.layout.histogram()
			.bins(12)
			(CountsArray)

		
		console.log(CountsArray);
		
		
		//set up basic scale
		var width = 900;
		var height = 800;
		var margin = {top:40,right:20,bottom:30,left:40};
		
		var widthScale = d3.scale.linear()
						.domain([0,40]) 
						.range([0,width]);
		
		var heightScale = d3.scale.linear()
						.domain([0,40])
						.range([0,height])
						
		var colorScale = d3.scale.linear()
						.domain([0,40])
						.range(["red","green"])

		var canvas = d3.select ("body")
			.append("svg")
			.attr("width", width )
			.attr("height", height);
		
			
		var bars = canvas.selectAll(".rect")
			.data(CountsArray)
			.enter()
				.append("rect")
				.attr("width", function(d){return widthScale(d);}) 
				.attr("height", 20)
				.attr("x",0)
				.attr("y",function(d,i){return i*40})
				.attr("fill", function (d){return colorScale(d)});
		
		});
		

		
    </script>


    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="../bower_components/angular/angular.js"></script>
    <script src="../bower_components/angular-route/angular-route.js"></script>
    <script src="../bower_components/angular-animate/angular-animate.js"></script>
    <script src="../bower_components/d3/d3.js"></script>
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:js({.tmp,app}) scripts/scripts.js -->
    <script src="scripts/app.js"></script>
    <script src="scripts/controllers.js"></script>
    <script src="scripts/services.js"></script>
    <!-- endbuild -->
</body>
</html>
